definition

module org/sugarj/languages/SugarJS
imports org/sugarj/languages/JavaScript
        org/sugarj/languages/Sdf2
        org/sugarj/languages/Stratego
        org/sugarj/languages/EditorServices
        org/sugarj/languages/Sugar

exports
 
  lexical syntax
    [\ \t\12\r\n] -> LAYOUT

  context-free syntax 
    JavaScriptProgram -> ToplevelDeclaration
    SugarModuleDec    -> ToplevelDeclaration
    SugarImportDec    -> TopLevelDeclaration
    SugarDec          -> TopLevelDeclaration

  context-free start-symbols
    SugarCompilationUnit

  context-free syntax
    SugarOrJavaScript  -> SugarCompilationUnit {cons("CompilationUnit")}

    SugarImportDec* JavaScriptProgram       -> SugarOrJavaScript {cons("JavaScript")}
    SugarModuleDec SugarImportDec* SugarDec -> SugarOrJavaScript {cons("Sugar")}

    %% SugarJS module and import decs are similar to proposals for JavaScript v6
    "import" SugarModule       -> SugarImportDec {cons("SugarImportDec")}  
    "module" SugarModule       -> SugarModuleDec {cons("SugarModuleDec")}
    
    "sugar" SugarBody          -> SugarDec {cons("SugarDec")}

    "{" SugarDefElem "}"       -> SugarBody {cons("SugarBody")}

    
    lexical syntax
      [\"] {SugarId "/"}+ [\"]  -> SugarModule
      [A-Za-z][A-Za-z0-9]*      -> SugarId
  
    lexical restrictions
      SugarId "sugar" "module" "import" -/- [A-Za-z0-9]
      
